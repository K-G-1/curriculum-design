C51 COMPILER V9.00   MAIN                                                                  11/27/2018 23:51:24 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: G:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

*** WARNING C500 IN LINE 1 OF MAIN.C: LICENSE ERROR (R208: RENEW LICENSE ID CODE (LIC))

   1          #include"all.h"
   2          uint count1,count2;
   3          uint systick_cnt = 0;                                                   //心跳时钟计数 
   4          uint ms_10,ms_100,ms_500,ms_1000 = 0;                   // 调用频率
   5          
   6          
   7          void init()
   8          {
   9   1              TMOD=0x01;          //定义定时器0工作方式1
  10   1              TH0=(65536-1000)/256;     // 12M时钟就是1ms的计时
  11   1              TL0=(65536-1000)%256;
  12   1              EA=1;
  13   1              ET0=1;
  14   1              TR0=1;
  15   1      }
  16          
  17          void task(void)
  18          {
  19   1              //读取火焰传感器与避障传感器
  20   1              if(ms_10 == 1)
  21   1              {
  22   2                       ms_10 = 0;
  23   2                       detection_IO();
  24   2              }
  25   1              // 行驶逻辑
  26   1              if(ms_100 == 1)
  27   1              {
  28   2                      ms_100 = 0;
  29   2                      travel_task(10);
  30   2              }
  31   1              // ADC任务
  32   1              if(ms_500 == 1)
  33   1              {
  34   2      
  35   2              }
  36   1              if(ms_1000 == 1)
  37   1              {
  38   2                       ms_1000 = 0;
  39   2                       display(machine_status);
  40   2              }
  41   1      }
  42          void main()
  43          {
  44   1      
  45   1              init();
  46   1              P0=0x00;
  47   1              P1=0x00;
  48   1              P2=0x00;
  49   1              PWM1 = 1;
  50   1              PWM2 = 1;
  51   1              while(1)
  52   1              {
  53   2                      // 任务调用
  54   2                      task();
C51 COMPILER V9.00   MAIN                                                                  11/27/2018 23:51:24 PAGE 2   

  55   2                      
  56   2              }
  57   1      
  58   1      }
  59          
  60          void  time0() interrupt 1
  61          {
  62   1              TH0=(65536-1000)/256;
  63   1              TL0=(65536-1000)%256;
  64   1              systick_cnt ++;
  65   1      
  66   1              if(systick_cnt %10 == 0)
  67   1                      ms_10 = 1;
  68   1              if(systick_cnt % 100 == 0)
  69   1                      ms_100 = 1 ;
  70   1              if(systick_cnt % 500 == 0)
  71   1                      ms_500 = 1 ;
  72   1              if(systick_cnt % 1000 == 0)
  73   1                      ms_1000 = 1 ;
  74   1      
  75   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    214    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     14    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
