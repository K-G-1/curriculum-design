C51 COMPILER V9.00   MAIN                                                                  11/29/2018 11:19:37 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: H:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

*** WARNING C500 IN LINE 1 OF MAIN.C: LICENSE ERROR (R208: RENEW LICENSE ID CODE (LIC))

   1          #include"all.h"
*** WARNING C235 IN LINE 7 OF DISPLAY.H: parameter 1: different types
   2          uint count1,count2;
   3          uint systick_cnt = 0;                                                   //心跳时钟计数 
   4          uint ms_10,ms_100,ms_500,ms_1000 = 0;                   // 调用频率
   5          
   6          
   7          void init()
   8          {
   9   1              TMOD=0x01;          //定义定时器0工作方式1
  10   1              TH0=(65536-1000)/256;     // 12M时钟就是1ms的计时
  11   1              TL0=(65536-1000)%256;
  12   1              EA=1;
  13   1              ET0=1;
  14   1              TR0=1;
  15   1      }
  16          
  17          void task(void)
  18          {
  19   1              //读取火焰传感器与避障传感器
  20   1              if(ms_10 == 1)
  21   1              {
  22   2                       ms_10 = 0;
  23   2                       detection_IO();
  24   2                       display(voltage);
  25   2              }
  26   1              // 行驶逻辑
  27   1              if(ms_100 == 1)
  28   1              {
  29   2                      ms_100 = 0;
  30   2      
  31   2                      travel_task(10);
  32   2              }
  33   1              // ADC任务
  34   1              if(ms_500 == 1)
  35   1              {
  36   2                        ADC_task();
  37   2              }
  38   1              //led显示，也可以当做报警设置
  39   1              if(ms_1000 == 1)
  40   1              {
  41   2                       ms_1000 = 0;
  42   2                       
  43   2                       LED_task(machine_status);
  44   2              }
  45   1      }
  46          void main()
  47          {
  48   1              
  49   1              init();
  50   1              P0=0x00;
  51   1              P1=0x00;
  52   1              P2=0x00;
  53   1              PWM1 = 1;
C51 COMPILER V9.00   MAIN                                                                  11/29/2018 11:19:37 PAGE 2   

  54   1              PWM2 = 1;
  55   1              while(1)
  56   1              {
  57   2                      // 任务调用
  58   2                      task();
  59   2                      
  60   2      
  61   2              }
  62   1      
  63   1      }
  64          //这个中断不要修改
  65          void  time0() interrupt 1
  66          {
  67   1              TH0=(65536-1000)/256;
  68   1              TL0=(65536-1000)%256;
  69   1              systick_cnt ++;
  70   1      
  71   1              if(systick_cnt %10 == 0)
  72   1                      ms_10 = 1;
  73   1              if(systick_cnt % 100 == 0)
  74   1                      ms_100 = 1 ;
  75   1              if(systick_cnt % 500 == 0)
  76   1                      ms_500 = 1 ;
  77   1              if(systick_cnt % 1000 == 0)
  78   1                      ms_1000 = 1 ;
  79   1      
  80   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    232    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     14    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
